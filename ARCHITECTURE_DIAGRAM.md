# ğŸŒ GeoSafe - Veri AkÄ±ÅŸÄ± & Sistem Mimarisi

## Sistem Mimarisi DiyagramÄ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        GeoSafe Complete System                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BROWSER (Port 3000)                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  React Frontend (TypeScript)                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Leaflet Map (OpenStreetMap)                              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ 5 Blue Pins (Warehouses) - Point Geometry               â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ 3 Orange Polygons (Safe Zones) - Polygon Geometry       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Coordinates Display (Click Handler)                      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ API Service Layer (axios)                               â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â†• HTTP (CORS enabled)                       â”‚
â”‚                         (Port 3000 â†’ Port 8000)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BACKEND SERVER (Port 8000)                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  FastAPI Application (Python)                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  GET /api/warehouses/           â†’  [Warehouse List]        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  GET /api/warehouses/{id}       â†’  [Warehouse Detail]      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  GET /api/safe-zones/           â†’  [SafeZone List]         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  GET /api/safe-zones/{id}       â†’  [SafeZone Detail]       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  GET /health                    â†’  {status: ok}            â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                                      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  Models & Schemas (SQLAlchemy + Pydantic)                  â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Warehouse        â”‚  â”‚ SafeZone         â”‚                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ location      â”‚  â”‚ â€¢ geometry       â”‚                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚   (Point)       â”‚  â”‚   (Polygon)      â”‚                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ capacity      â”‚  â”‚ â€¢ capacity       â”‚                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â€¢ status        â”‚  â”‚ â€¢ status         â”‚                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  @field_serializer("geometry") â†’ GeoJSON                  â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â†• asyncpg (async)                           â”‚
â”‚                         (TCP â†’ Port 5432)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DATABASE (Port 5432)                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PostgreSQL 15 + PostGIS 3.3                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  warehouses (Table)                                         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ id (PK)                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ name (VARCHAR)                                          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ location (geometry Point, SRID 4326) [GIST Index]       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ capacity (INTEGER)                                      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ status (VARCHAR)                                        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ metadata (JSON)                                         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ timestamps                                              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  safe_zones (Table)                                         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ id (PK)                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ name (VARCHAR)                                          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ geometry (geometry Polygon, SRID 4326) [GIST Index]     â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ capacity (INTEGER)                                      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ status (VARCHAR)                                        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ metadata (JSON)                                         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ timestamps                                              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  items (Table)                                              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ id (PK)                                                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ name, unit, category                                    â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ timestamps                                              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                              â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  warehouse_inventory (Junction Table)                       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ warehouse_id (FK)                                       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ item_id (FK)                                            â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ quantity                                                â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Veri AkÄ±ÅŸÄ± (Data Flow)

### 1. Frontend Request Flow
```
User opens http://localhost:3000
    â†“
React App mounts
    â†“
useEffect() â†’ API Service calls
    â†“
axios.get('http://localhost:8000/api/warehouses')
    â†“
[CORS Check] âœ… Allow (port 3000 whitelisted)
    â†“
Backend FastAPI receives request
```

### 2. Backend Processing Flow
```
FastAPI Route Handler
    â†“
SQLAlchemy Query (AsyncSession)
    â†“
PostgreSQL executes:
  SELECT * FROM warehouses;
    â†“
PostGIS returns:
  - id: 1
  - name: "KadÄ±kÃ¶y Central Warehouse"
  - location: geometry Point object (Shapely)
  - capacity: 5000
    â†“
Pydantic WarehouseResponse schema:
  @field_serializer("location")
  â†’ Converts Shapely Point â†’ GeoJSON
    â†“
Returns JSON to Frontend
```

### 3. Geometry Conversion
```
PostGIS Point (Binary)
    â†“
Shapely Geometry Object
    â†“
__geo_interface__ property
    â†“
GeoJSON: {"type": "Point", "coordinates": [29.0230, 40.9910]}
    â†“
Frontend Leaflet Marker
```

---

## Seed Script Veri OluÅŸturma AkÄ±ÅŸÄ±

```
python scripts/seed_db.py
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Create Async Database Connection       â”‚
â”‚  â†’ PostgreSQL + asyncpg driver          â”‚
â”‚  â†’ DATABASE_URL from .env               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Create 5 Warehouses                    â”‚
â”‚                                         â”‚
â”‚  SAMPLE_WAREHOUSES = [                  â”‚
â”‚    {                                    â”‚
â”‚      "name": "KadÄ±kÃ¶y Central...",      â”‚
â”‚      "location": (29.0230, 40.9910)     â”‚
â”‚      "capacity": 5000,                  â”‚
â”‚      "metadata": {...}                  â”‚
â”‚    },                                   â”‚
â”‚    ...                                  â”‚
â”‚  ]                                      â”‚
â”‚                                         â”‚
â”‚  â†’ Convert tuple (lon, lat)             â”‚
â”‚  â†’ Create Shapely Point                 â”‚
â”‚  â†’ Convert to WKT: "POINT(29.023 40.991)"â”‚
â”‚  â†’ Insert into database                 â”‚
â”‚                                         â”‚
â”‚  âœ“ 5 Points inserted with SRID 4326    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Create 3 Safe Zones                    â”‚
â”‚                                         â”‚
â”‚  SAMPLE_SAFE_ZONES = [                  â”‚
â”‚    {                                    â”‚
â”‚      "name": "KadÄ±kÃ¶y Central...",      â”‚
â”‚      "geometry": Polygon([              â”‚
â”‚        (29.0150, 40.9800),              â”‚
â”‚        (29.0350, 40.9800),              â”‚
â”‚        (29.0350, 41.0000),              â”‚
â”‚        (29.0150, 41.0000),              â”‚
â”‚        (29.0150, 40.9800)  â† Close ring â”‚
â”‚      ]),                                â”‚
â”‚      "capacity": 5000                   â”‚
â”‚    },                                   â”‚
â”‚    ...                                  â”‚
â”‚  ]                                      â”‚
â”‚                                         â”‚
â”‚  â†’ Create Shapely Polygon               â”‚
â”‚  â†’ Convert to WKT Polygon               â”‚
â”‚  â†’ Insert into database                 â”‚
â”‚                                         â”‚
â”‚  âœ“ 3 Polygons inserted with SRID 4326  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Create 6 Supply Items                  â”‚
â”‚                                         â”‚
â”‚  items = [                              â”‚
â”‚    Item(name="Blanket", unit="piece"),  â”‚
â”‚    Item(name="Water", unit="liter"),    â”‚
â”‚    Item(name="Medical Kit", ...),       â”‚
â”‚    ...                                  â”‚
â”‚  ]                                      â”‚
â”‚                                         â”‚
â”‚  âœ“ 6 Items inserted                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Create Warehouse-Item Relationships    â”‚
â”‚                                         â”‚
â”‚  inventory_mapping = [                  â”‚
â”‚    (warehouse_0, [                      â”‚
â”‚      (item_0, 500),     # Blankets      â”‚
â”‚      (item_1, 2000),    # Water         â”‚
â”‚      (item_2, 50)       # Medical       â”‚
â”‚    ]),                                  â”‚
â”‚    ...                                  â”‚
â”‚  ]                                      â”‚
â”‚                                         â”‚
â”‚  âœ“ 20+ relationships inserted           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Commit Transaction                     â”‚
â”‚                                         â”‚
â”‚  await session.commit()                 â”‚
â”‚                                         â”‚
â”‚  âœ… Database populated with:            â”‚
â”‚     â€¢ 5 Warehouses (Points)            â”‚
â”‚     â€¢ 3 Safe Zones (Polygons)           â”‚
â”‚     â€¢ 6 Items                           â”‚
â”‚     â€¢ 20+ Inventory Records             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Koordinat Sistemi (SRID 4326)

```
                          N
                          â†‘
                    41.052Â° â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   OrtakÃ¶y       â”‚
                            â”‚   (29.0145Â°E)   â”‚
                   41.043Â°  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ BeÅŸiktaÅŸ Supply
                            â”‚                 â”‚ (29.0010Â°E)
                   41.000Â°  â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ KadÄ±kÃ¶y Safe Zone
                            â”‚KadÄ±kÃ¶yâ”‚ (Upper) â”‚ 
                   40.985Â°  â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ Moda Emergency
                            â”‚ Moda-YeldeÄŸir- â”‚ (29.0320Â°E)
                   40.975Â°  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ FenerbahÃ§e
                            â”‚  FenerbahÃ§e     â”‚ (29.0450Â°E)
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          29.0010Â° â† W to E â†’ 29.0450Â°

TÃ¼rkiye Map View:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  BLACK SEA              â”‚
    â”‚     Turkey              â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚   â”‚ Istanbul Region  â”‚   â”‚ â† GeoSafe Area
    â”‚   â”‚  (Our Warehouses â”‚   â”‚
    â”‚   â”‚   + Safe Zones)  â”‚   â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## CORS Flow

```
Frontend (localhost:3000)
    â†“
Sends: GET /api/warehouses
Header: Origin: http://localhost:3000
    â†“
Backend (localhost:8000) receives
    â†“
CORSMiddleware checks:
  allow_origins = [
    "http://localhost:3000",  â† âœ… MATCH!
    "http://127.0.0.1:3000"
  ]
    â†“
Response Header:
  Access-Control-Allow-Origin: http://localhost:3000
    â†“
Browser âœ… Allows response
    â†“
Frontend processes data
    â†“
Leaflet Map renders
```

---

## Geometry Type Comparison

| Aspect | Warehouse (Point) | Safe Zone (Polygon) |
|--------|-------------------|---------------------|
| **SQL Type** | `GEOMETRY(Point, 4326)` | `GEOMETRY(Polygon, 4326)` |
| **WKT Format** | `POINT(29.023 40.991)` | `POLYGON((lon lat, ...))` |
| **GeoJSON** | `{"type": "Point", "coordinates": [lon, lat]}` | `{"type": "Polygon", "coordinates": [[[lon, lat], ...]]}` |
| **Leaflet UI** | Marker (L.marker) | GeoJSON (L.geoJSON) |
| **Use Case** | Single location | Area boundary |
| **Visual** | ğŸ”µ Blue Pin | ğŸŸ§ Orange Area |
| **Index Type** | GIST (Spatial) | GIST (Spatial) |

---

## Environment Variables

### Backend (.env)
```
DATABASE_URL=postgresql+asyncpg://geosafe_user:geosafe_pass@localhost:5432/geosafe_db
DEBUG=false
CORS_ORIGINS=http://localhost:3000
```

### Frontend (.env)
```
REACT_APP_API_BASE_URL=http://localhost:8000
```

### Docker Compose (Alternative)
```yaml
environment:
  DATABASE_URL: postgresql+asyncpg://geosafe_user:geosafe_pass@db:5432/geosafe_db
  REACT_APP_API_BASE_URL: http://localhost:8000
```

---

**Bu dokÃ¼mantasyon tÃ¼m akÄ±ÅŸlarÄ± detaylÄ± ÅŸekilde gÃ¶stermektedir.** âœ…
